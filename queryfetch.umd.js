!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("queryfetch",r):e.queryfetch=r()}(this,function(){"use strict";var QueryFetch=function(e){this.src=e};QueryFetch.prototype.serialize=function serialize(obj,pre){var this$1=this,src=this.src,keys=Object.keys(obj||src),pairs=keys.map(function(k){var key=pre?pre+"['"+k+"']":k,path="src."+key,item=eval(path);return item instanceof Object?this$1.serialize(item,key):[key,item].join("=")});return pairs.join("&").replace(/\'/g,"")},QueryFetch.prototype.parse=function(){var e={};return(this.src.startsWith("?")?this.src.substr(1):this.src).replace(/(;+|&+)/g,"&").split("&").forEach(function(r){var t=r.split("=").map(decodeURIComponent),s=t[0],n=t[1];if(!s)return 0;if(n=n?isNaN(n)?n:new Number(n).valueOf():null,!s.includes("["))return e[s]=e.hasOwnProperty(s)?Array.isArray(e[s])?e[s].push(n):[e[s],n]:n;var i=s.split("["),o=i[0],c=i[1],a=c?c.replace("]",""):0,u=!isNaN(a),p=a?u?parseInt(a):a:0;return e[o]=e.hasOwnProperty(o)?e[o]:u?[]:{},p?e[o][p]=n:e[o].push(n)}),e},QueryFetch.prototype.form=function(){var e=this;if("undefined"==typeof FormData)return console.error("FormData not supported");if(this.src instanceof FormData)return this.src;if("undefined"!=typeof HTMLFormElement&&this.src instanceof HTMLFormElement)return new FormData(this.src);if(this.src instanceof Object){var r=new FormData;try{for(var t in e.src)e.src.hasOwnProperty(t)&&r.append(t,e.src[t])}catch(e){console.error(e.message)}return r}return this.src};var queryfetch=function(e){return new QueryFetch(e)};return queryfetch});

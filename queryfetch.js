!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("queryfetch",e):r.queryfetch=e()}(this,function(){"use strict";var r=function(r){this.src=r};r.prototype.serialize=function(r,e){var t=this,n=this.src;return Object.keys(r||n).map(function(r){var s=e?e+"['"+r+"']":r,i=e?e.replace(/\[\'/g,".").replace(/\'\]/g,""):r,o=n;return(e?i+"."+r:r).split(".").forEach(function(r){return o=o[r]}),o instanceof Object?t.serialize(o,s):[s,o].join("=")}).join("&").replace(/\'/g,"")},r.prototype.parse=function(){var r={};return(this.src.startsWith("?")?this.src.substr(1):this.src).replace(/(;+|&+)/g,"&").split("&").forEach(function(e){var t=e.split("=").map(decodeURIComponent),n=t[0],s=t[1];if(!n)return 0;if(s=s?isNaN(s)?s:new Number(s).valueOf():null,!n.includes("["))return r[n]=r.hasOwnProperty(n)?Array.isArray(r[n])?r[n].push(s):[r[n],s]:s;var i=n.split("["),o=i[0],a=i[1],c=a?a.replace("]",""):0,f=!isNaN(c),u=c?f?parseInt(c):c:0;return r[o]=r.hasOwnProperty(o)?r[o]:f?[]:{},u?r[o][u]=s:r[o].push(s)}),r},r.prototype.form=function(){var r=this;if("undefined"==typeof FormData)return console.error("FormData not supported");if(this.src instanceof FormData)return this.src;if("undefined"!=typeof HTMLFormElement&&this.src instanceof HTMLFormElement)return new FormData(this.src);if("string"==typeof this.src)return this.form(this.parse());if(this.src instanceof Object){var e=new FormData;try{for(var t in r.src)r.src.hasOwnProperty(t)&&e.append(t,r.src[t])}catch(r){console.error(r.message)}return e}return this.src};return function(e){return new r(e)}});

!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("queryfetch",e):r.queryfetch=e()}(this,function(){"use strict";var e=function(r){this.src=r};return e.prototype.serialize=function(r,s){var i=this,o=this.src;return Object.keys(r||o).map(function(r){var e=s?s+"['"+r+"']":r,t=s?s.replace(/\[\'/g,".").replace(/\'\]/g,""):r,n=(s?t+"."+r:r).split(".").reduce(function(r,e){return r[e]},o);return n instanceof Object?i.serialize(n,e):[e,n].join("=")}).join("&").replace(/\'/g,"")},e.prototype.parse=function(){var f={};return(this.src.startsWith("?")?this.src.substr(1):this.src).replace(/(;+|&+)/g,"&").split("&").forEach(function(r){var e=r.split("=").map(decodeURIComponent),t=e[0],n=e[1];if(!t)return 0;if(n=n?isNaN(n)?n:new Number(n).valueOf():null,!t.includes("["))return f[t]=f.hasOwnProperty(t)?Array.isArray(f[t])?f[t].push(n):[f[t],n]:n;var s=t.split("["),i=s[0],o=s[1],c=o?o.replace("]",""):0,a=!isNaN(c),u=c?a?parseInt(c):c:0;return f[i]=f.hasOwnProperty(i)?f[i]:a?[]:{},u?f[i][u]=n:f[i].push(n)}),f},e.prototype.form=function(){var e=this;if("undefined"==typeof FormData)return console.error("FormData not supported");if(this.src instanceof FormData)return this.src;if("undefined"!=typeof HTMLFormElement&&this.src instanceof HTMLFormElement)return new FormData(this.src);"string"==typeof this.src&&(this.src=this.parse());var t=new FormData;try{Object.keys(this.src).forEach(function(r){t.append(r,e.src[r])})}catch(r){console.error(r.message)}return t},function(r){return new e(r)}});
